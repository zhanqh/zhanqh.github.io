<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Redis 内存型数据库基本使用 | zhan's blog</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Redis 内存型数据库基本使用</h1><a id="logo" href="/.">zhan's blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/data_observe.html"><i class="fa fa-line-chart"> 数据</i></a><a href="/archives/"><i class="fa fa-archive"> 笔记</i></a><a href="/app-bus.html"><i class="fa fa-mobile"> bus app</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Redis 内存型数据库基本使用</h1><div class="post-meta">Jun 13, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#命令"><span class="toc-number">1.</span> <span class="toc-text">命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置"><span class="toc-number">2.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#string-字符串"><span class="toc-number">3.</span> <span class="toc-text">string 字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hash-哈希"><span class="toc-number">4.</span> <span class="toc-text">hash 哈希</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#list-列表"><span class="toc-number">5.</span> <span class="toc-text">list 列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set-集合"><span class="toc-number">6.</span> <span class="toc-text">set 集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#zset-有序集合"><span class="toc-number">7.</span> <span class="toc-text">zset 有序集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-连接"><span class="toc-number">8.</span> <span class="toc-text">Python 连接</span></a></li></ol></div></div><div class="post-content"><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p>启动数据库：<code>redis-server</code><br>启动客户端：<code>redis-cli</code><br>连接远程主机：<code>redis-cli -h host -p port -a password</code></p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><ul>
<li>配置文件：/usr/local/etc</li>
<li>设置密码  <code>requirepass foobared</code></li>
<li>修改 redis.conf 配置使局域网内其他机器能访问：<br>  <code>bind 127.0.0.1 10.104.152.137</code><br>  注意<strong>10.104.152.137</strong>为主节点内网 IP，即设置 redis 服务器要监听的地址</li>
</ul>
<h2 id="string-字符串"><a href="#string-字符串" class="headerlink" title="string 字符串"></a>string 字符串</h2><ul>
<li>设置指定 key 的值：<code>SET key value</code></li>
<li>获取指定 key 的值:<code>GET key</code></li>
</ul>
<h2 id="hash-哈希"><a href="#hash-哈希" class="headerlink" title="hash 哈希"></a>hash 哈希</h2><ul>
<li>同时将多个 field-value (域-值)对设置到哈希表 key 中：<code>HMSET key field1 value1 [field2 value2 ]</code></li>
<li>删除一个或多个哈希表字段：<code>HDEL key field2 [field2]</code></li>
</ul>
<h2 id="list-列表"><a href="#list-列表" class="headerlink" title="list 列表"></a>list 列表</h2><ul>
<li>获取列表指定范围内的元素：<code>LRANGE key start stop</code></li>
<li>将一个或多个值插入到列表头部：<code>LPUSH key value1 [value2]</code></li>
<li>将一个或多个值插入到已存在的列表头部：<code>LPUSHX key value</code></li>
<li>在列表中添加一个或多个值：<code>RPUSH key value1 [value2]</code></li>
<li>为已存在的列表添加值：<code>RPUSHX key value</code></li>
<li>获取列表长度：<code>LLEN key</code></li>
<li>移出并获取列表的第一个元素：<code>LPOP key</code></li>
<li>移除并获取列表最后一个元素：<code>RPOP key</code></li>
<li>通过索引获取列表中的元素：<code>LINDEX key index</code></li>
<li>通过索引设置列表元素的值：<code>LSET key index value</code></li>
<li>对一个列表进行修剪(trim)，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除：<code>LTRIM key start stop</code></li>
</ul>
<h2 id="set-集合"><a href="#set-集合" class="headerlink" title="set 集合"></a>set 集合</h2><ul>
<li>向集合添加一个或多个成员：<code>SADD key member1 [member2]</code></li>
<li>获取集合的成员数：<code>SCARD key</code></li>
<li>返回给定所有集合的差集：<code>SDIFF key1 [key2]</code></li>
<li>返回给定所有集合的差集并存储在 destination 中：<code>SDIFFSTORE destination key1 [key2]</code></li>
<li>返回给定所有集合的交集：<code>SINTER key1 [key2]</code></li>
<li>返回给定所有集合的交集并存储在 destination 中：<code>SINTERSTORE destination key1 [key2]</code></li>
<li>判断 member 元素是否是集合 key 的成员：<code>SISMEMBER key member</code></li>
<li>返回集合中的所有成员：<code>SMEMBERS key</code></li>
<li>将 member 元素从 source 集合移动到 destination 集合：<code>SMOVE source destination member</code></li>
<li>移除并返回集合中的一个随机元素：<code>SPOP key</code></li>
<li>返回集合中一个或多个随机数：<code>SRANDMEMBER key [count]</code></li>
<li>移除集合中一个或多个成员：<code>SREM key member1 [member2]</code></li>
<li>返回所有给定集合的并集：<code>SUNION key1 [key2]</code></li>
<li>所有给定集合的并集存储在 destination 集合中：<code>SUNIONSTORE destination key1 [key2]</code></li>
<li>迭代集合中的元素：<code>SSCAN key cursor [MATCH pattern] [COUNT count]</code></li>
</ul>
<h2 id="zset-有序集合"><a href="#zset-有序集合" class="headerlink" title="zset 有序集合"></a>zset 有序集合</h2><p>Redis 有序集合和集合一样也是string类型元素的集合,且不允许重复的成员。<br>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。<br>有序集合的成员是唯一的,但分数(score)可以重复。</p>
<h2 id="Python-连接"><a href="#Python-连接" class="headerlink" title="Python 连接"></a>Python 连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">import redis</div><div class="line">db = redis.Redis(host=&apos;127.0.0.1&apos;, port=&apos;6379&apos;)</div><div class="line"></div><div class="line">    if db.keys(&apos;proxy:1:*&apos;):</div><div class="line">        for proxy in proxies:</div><div class="line">            db.set(&apos;proxy:2:&apos;+proxy, proxy)</div><div class="line">        print(&apos;向 proxy:2 插入&apos; + str(len(proxies)) + &apos; 个代理&apos;)</div><div class="line">        print(&apos;删除 proxy:1 中的 &apos; + str(len(db.keys(&apos;proxy:1:*&apos;))) + &apos; 个代理&apos;)</div><div class="line">        for key in db.keys(&apos;proxy:1:*&apos;):</div><div class="line">            db.delete((key).decode(&apos;ascii&apos;))</div><div class="line">    else:</div><div class="line">        for proxy in proxies:</div><div class="line">            db.set(&apos;proxy:1:&apos;+proxy, proxy)</div><div class="line">        print(&apos;向 proxy:1 插入&apos; + str(len(proxies)) + &apos; 个代理&apos;)</div><div class="line">        print(&apos;删除 proxy:2 中的 &apos; + str(len(db.keys(&apos;proxy:2:*&apos;))) + &apos; 个代理&apos;)</div><div class="line">        for key in db.keys(&apos;proxy:2:*&apos;):</div><div class="line">            db.delete((key).decode(&apos;ascii&apos;))</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://blog.zhanqh.com/2017/06/13/Redis 内存型数据库基本使用/" data-id="cj4v2kvc3001hnbrc6487vojo" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Linux/">Linux</a></div><div class="post-nav"><a href="/2017/06/14/公交查询/" class="pre">公交查询应用</a><a href="/2017/06/12/MongoDB/" class="next">MongoDB 基础知识</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://blog.zhanqh.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/实践/">实践</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作/">工作</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/工作笔记/" style="font-size: 15px;">工作笔记</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/hosts/" style="font-size: 15px;">hosts</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/h5/" style="font-size: 15px;">h5</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/Charles/" style="font-size: 15px;">Charles</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/crawler/" style="font-size: 15px;">crawler</a> <a href="/tags/Scrapy/" style="font-size: 15px;">Scrapy</a></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">zhan's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>